<!DOCTYPE html>
<html lang="pt-br">


<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>AirData</title>


  <link href="assets/img/LogoAzulEscuro.svg" rel="icon">
  <link href="assets/img/LogoAzulEscuro.svg" rel="applicone-touch-icon">


  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">





  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <!-- Uncomment below if you prefer to use an image logo -->
      <a href="index.html" class="logo"><img src="assets/img/LogoAzulEscuro.svg" alt=""></a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li>|</li>
          <li><a href="sing-up.html">Cadastre-se</a></li>
          <li><a href="sing-in.html">Entrar</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <main id="main">
    <!-- ======= About Section ======= -->
    <section id="about" class="about section-bg">


      <!-- ======= Contact Section ======= -->
      <section id="contact" class="contact">
        <div class="container" data-aos="fade-up">

          <div class="section-title">

            <h3><span>Entre</span></h3>
          </div>

          <div class="row" data-aos="fade-up" data-aos-delay="100">
            <div class="col-lg-12">
              <form role="form" class="email-form">
                <div class="row" style="display: flex;
                justify-content: center;
                align-items: center;">
                  <div class="col-lg-6 col-md-8 form-group ">
                    E-mail
                    <input type="email" class="form-control" name="emailPessoal" id="emailPessoal"
                      placeholder="Ex: pedrojesuino@airdata.com">
                  </div>
                </div>
                <div class="row" style="display: flex;
                justify-content: center;
                align-items: center;">
                  <div class="col-lg-6 col-md-8 form-group">
                    Senha
                    <input type="password" name="password" class="form-control" id="password" placeholder="••••••••">
                  </div>
                </div>
                <div class="text-center"><button type="button" onclick="entrar()">Entrar</button></div>
              </form>
            </div>
          </div>
        </div>
      </section>
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-4 col-md-6 footer-contact">
            <h3>AirData</h3>
            <p>
              Rua Haddock Lobo, 595 <br>
              São Paulo, SP 01414-00<br>
              Brasil <br><br>
              <strong>Telefone:</strong> (11) 3330-4616<br>
              <strong>Email:</strong> airdata-grupo.slack.com<br>
            </p>
          </div>

          <div class="col-lg-4 col-md-6 footer-links">
            <h4>Links Uteis</h4>
            <ul>
              <li><i class="bi bi-arrow-right-short" style="font-size: 1rem;"></i> <a href="#hero">Home</a></li>
              <li><i class="bi bi-arrow-right-short" style="font-size: 1rem;"></i> <a href="#produto">Baixar</a></li>
              <li><i class="bi bi-arrow-right-short" style="font-size: 1rem;"></i> <a href="#sobre">Sobre</a></li>
              <li><i class="bi bi-arrow-right-short" style="font-size: 1rem;"></i> <a href="#">Termos de serviço</a>
              </li>
              <li><i class="bi bi-arrow-right-short" style="font-size: 1rem;"></i> <a href="#">Politica de
                  privacidade</a></li>
            </ul>
          </div>

          <div class="col-lg-4 col-md-6 footer-links">
            <h4>Nossas redes sociais</h4>
            <div class="social-links mt-3">
              <a href="https://twitter.com/explore" class="twitter"><i class="bi bi-twitter"></i></a>
              <a href="https://github.com/CCO-AirData" class="facebook"><i class="bi bi-github"></i></a>
              <a href="https://www.instagram.com/s" class="instagram"><i class="bi bi-instagram"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container py-4">
      <div class="copyright">
        &copy; Copyright <strong><span>AirData</span></strong>. Todos os direitos reservados.
      </div>
  </footer>

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>


  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>

  <script src="assets/js/main.js"></script>
</body>
</html>
<script>

  function entrar() {
    var emailPessoalVar = emailPessoal.value;
    var passwordVar = password.value;

    if (!emailPessoalVar.indexOf("@") || emailPessoalVar.startsWith("@") || emailPessoalVar.endsWith("@") || !emailPessoalVar.endsWith(".com")) {
      Swal.fire({
        title: 'Error!',
        text: 'Insira um e-mail válido',
        icon: 'error',
        confirmButtonText: 'OK'
      })
    } else {


      fetch("/usuarios/autenticar", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          emailPessoalServer: emailPessoalVar,
          passwordServer: passwordVar

        })
      }).then(function (resposta) {
        console.log("resposta: ", resposta);
        if (resposta.ok) {
          resposta.json().then(json => {

            console.log(json.idUsuario)
            console.log(JSON.stringify(json))

            sessionStorage.ID_USUARIO = json.idUsuario;
            sessionStorage.NOME_USUARIO = json.nomeUsuario;
            sessionStorage.TIPO_USUARIO = json.tipoUsuario;
            sessionStorage.ID_TORRE = json.idTorre;
            sessionStorage.ID_AEROPORTO = json.fkAeroporto;
            sessionStorage.ID_GESTOR = json.fkGestor;
          
            Swal.fire({
              title: 'Sucesso!',
              text: 'Login realizado com sucesso! Redirecionando para dashboard',
              icon: 'success',
              confirmButtonText: 'OK'
            })

            setTimeout(() => {
              window.location = "restrito/painel.html";
            }, "2000")
          });

        } else {
          Swal.fire({
            title: 'Erro!"',
            text: 'Houve um erro ao tentar realizar o login',
            icon: 'error',
            confirmButtonText: 'OK'
          })
        }
      }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
    }
  }
</script>